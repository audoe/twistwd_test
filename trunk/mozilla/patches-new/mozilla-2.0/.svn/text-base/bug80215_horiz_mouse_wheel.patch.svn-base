# HG changeset patch
# Parent b00828b02a41af3a4c1ae6b9fc9e92a746d04f09
importing patch bug80215_horiz_mouse_wheel.patch

diff --git a/content/events/src/nsEventStateManager.cpp b/content/events/src/nsEventStateManager.cpp
--- a/content/events/src/nsEventStateManager.cpp
+++ b/content/events/src/nsEventStateManager.cpp
@@ -1266,16 +1266,19 @@ nsEventStateManager::PreHandleEvent(nsPr
       }
       if ((useSysNumLines &&
            (msEvent->scrollFlags & nsMouseScrollEvent::kIsFullPage)) ||
           action == MOUSE_SCROLL_PAGE) {
           msEvent->delta = (msEvent->delta > 0)
             ? PRInt32(nsIDOMNSUIEvent::SCROLL_PAGE_DOWN)
             : PRInt32(nsIDOMNSUIEvent::SCROLL_PAGE_UP);
       }
+      if (msEvent->scrollFlags & nsMouseScrollEvent::kIsHorizontal) {
+        msEvent->isShift = PR_TRUE;
+      }
     }
     break;
   case NS_MOUSE_PIXEL_SCROLL:
     {
       nsIContent* content = GetFocusedContent();
       if (content)
         mCurrentTargetContent = content;
 
