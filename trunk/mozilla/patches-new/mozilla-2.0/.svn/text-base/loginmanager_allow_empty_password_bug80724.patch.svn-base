# HG changeset patch
# Parent babfae43a63b24ca1c05319f2660540dfce46144
Allow Komodo's password storage to use an empty "" password (bug 80724).

diff --git a/toolkit/components/passwordmgr/src/storage-Legacy.js b/toolkit/components/passwordmgr/src/storage-Legacy.js
--- a/toolkit/components/passwordmgr/src/storage-Legacy.js
+++ b/toolkit/components/passwordmgr/src/storage-Legacy.js
@@ -1282,18 +1282,18 @@ LoginManagerStorage_legacy.prototype = {
             [decryptedPassword, userCanceled] =
                 this._decrypt(login.wrappedJSObject.encryptedPassword);
 
             // Probably can't hit this case, but for completeness...
             if (userCanceled)
                 break;
 
             // If decryption failed (corrupt entry?) skip it. Note that we
-            // allow password-only logins, so decryptedUsername can be "".
-            if (decryptedUsername == null || !decryptedPassword)
+            // allow both the decryptedUsername and decryptedUsername to be "".
+            if (decryptedUsername == null || decryptedPassword == null)
                 continue;
 
             // Return copies to the caller. Prevents callers from modifying
             // our internal stoage, and helps avoid keeping decrypted data in
             // memory (although this is fuzzy, because of GC issues).
             var clone = new this._nsLoginInfo();
             clone.init(login.hostname, login.formSubmitURL, login.httpRealm,
                        decryptedUsername, decryptedPassword,
